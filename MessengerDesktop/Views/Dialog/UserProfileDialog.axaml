<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:MessengerDesktop.ViewModels"
             xmlns:controls="using:MessengerDesktop.Controls"
             x:Class="MessengerDesktop.Views.UserProfileDialog"
             x:DataType="vm:UserProfileDialogViewModel">

	<Border Width="400"
            Background="{DynamicResource SecondaryBG}"
            CornerRadius="16"
            BorderThickness="1"
            BorderBrush="{DynamicResource BorderDefault}"
            BoxShadow="0 8 32 #50000000">

		<Grid RowDefinitions="Auto,*,Auto">

			<!-- HEADER -->
			<Border Background="{DynamicResource PrimaryBG}"
                    CornerRadius="12,12,0,0"
                    Padding="24,18">
				<Grid ColumnDefinitions="*,Auto">
					<TextBlock Text="Профиль пользователя"
                               FontSize="17"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource TextPrimary}"/>

					<!-- Кнопка закрытия -->
					<Button Grid.Column="1"
                            Command="{Binding CloseOnBackgroundClickCommand}"
                            Background="Transparent"
                            Padding="4"
                            CornerRadius="6">
						<PathIcon Data="M18 6L6 18M6 6l12 12"
                                  Width="16" Height="16"
                                  Foreground="{DynamicResource TextSecondary}"/>
					</Button>
				</Grid>
			</Border>

			<!-- CONTENT -->
			<ScrollViewer Grid.Row="1"
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Disabled">
				<StackPanel Margin="24,20,24,24" Spacing="20">

					<!-- Аватар и имя -->
					<Grid ColumnDefinitions="Auto,*" HorizontalAlignment="Stretch">
						<controls:AvatarControl Classes="XLarge"
                                                Source="{Binding User.Avatar}"
                                                DisplayName="{Binding User.DisplayName}"
                                                IsOnline="{Binding User.IsOnline}"
                                                Margin="0,0,16,0"/>

						<StackPanel Grid.Column="1"
                                    VerticalAlignment="Center"
                                    Spacing="4">
							<TextBlock Text="{Binding User.DisplayName}"
                                       FontSize="18"
                                       FontWeight="SemiBold"
                                       Foreground="{DynamicResource TextPrimary}"
                                       TextWrapping="Wrap"/>

							<TextBlock 
                                       FontSize="13"
                                      />
						</StackPanel>
					</Grid>

					<Border Height="1" Background="{DynamicResource BorderDefault}"/>

					<!-- Информация об аккаунте -->
					<StackPanel Spacing="12">
						<TextBlock Text="ИНФОРМАЦИЯ"
                                   FontSize="12"
                                   FontWeight="SemiBold"
                                   Foreground="{DynamicResource TextSecondary}"
                                   Opacity="0.7"/>

						<!-- Имя пользователя -->
						<Grid ColumnDefinitions="*,*">
							<TextBlock Text="Имя пользователя"
                                       FontSize="14"
                                       Foreground="{DynamicResource TextSecondary}"/>
							<TextBlock Grid.Column="1"
                                       Text="{Binding User.Username, StringFormat='@{0}'}"
                                       FontSize="14"
                                       Foreground="{DynamicResource AccentColor}"
                                       HorizontalAlignment="Right"/>
						</Grid>

						<!-- Отдел -->
						<Grid ColumnDefinitions="*,*"
                              IsVisible="{Binding Department, Converter={x:Static ObjectConverters.IsNotNull}}">
							<TextBlock Text="Отдел"
                                       FontSize="14"
                                       Foreground="{DynamicResource TextSecondary}"/>
							<TextBlock Grid.Column="1"
                                       Text="{Binding Department}"
                                       FontSize="14"
                                       Foreground="{DynamicResource TextPrimary}"
                                       HorizontalAlignment="Right"
                                       TextTrimming="CharacterEllipsis"/>
						</Grid>						
					</StackPanel>

				</StackPanel>
			</ScrollViewer>

			<!-- FOOTER - Кнопка действия -->
			<Border Grid.Row="2"
                    Background="{DynamicResource PrimaryBG}"
                    CornerRadius="0,0,12,12"
                    Padding="24,16">

				<Button 
                        HorizontalAlignment="Stretch"
						Command="{Binding SendMessageCommand}"
                        HorizontalContentAlignment="Center"
                        Classes="AccentButton"
                        Padding="16,12"
                        CornerRadius="10">
					<StackPanel Orientation="Horizontal" Spacing="10">
						<PathIcon Data="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
                                  Width="18" Height="18"
                                  Foreground="White"/>
						<TextBlock Text="Написать сообщение"
                                   FontSize="15"
                                   FontWeight="SemiBold"/>
					</StackPanel>
				</Button>
			</Border>

		</Grid>
	</Border>
</UserControl>