Аннотация
=========

**Корпоративный мессенджер** — это кроссплатформенное приложение для организации внутренней коммуникации в компаниях. Программа обеспечивает *безопасный* обмен текстовыми сообщениями, файлами и позволяет проводить опросы среди сотрудников.

Система построена на клиент-серверной архитектуре с использованием **.NET 8**, **Avalonia UI** и **SignalR** для обмена сообщениями в реальном времени.

---

Введение
========

## Основные возможности

- Обмен сообщениями в реальном времени
- Групповые чаты и личные диалоги
- Интеграция с отделами компании
- Отправка файлов (изображения, документы, видео)
- Создание опросов с анонимным голосованием
- Push-уведомления о новых сообщениях
- Глобальный поиск по чатам и сообщениям
- Профили пользователей с аватарами
- Темы оформления (светлая, тёмная, системная)
- Административная панель управления

---

Назначение и условия применения
===============================

## Назначение программы

Приложение предназначено для:

1. Организации внутрикорпоративной коммуникации
2. Обмена рабочими документами и файлами
3. Проведения опросов и сбора мнений сотрудников
4. Координации работы отделов компании

## Условия применения

**Системные требования:**

| Параметр | Минимальное значение |
|----------|---------------------|
| ОС | Windows 10 / macOS 10.15 / Linux |
| ОЗУ | 4 ГБ |
| Диск | 200 МБ |
| Сеть | Стабильное подключение |
| Runtime | .NET 8.0 |

---

Установка
=========

## Установка клиента

1. - Скачайте дистрибутив для вашей ОС
2. - Распакуйте архив в удобную директорию
3. - Установите .NET 8.0 Runtime (если не установлен)
4. - Запустите `MessengerDesktop.exe`
5. - Введите адрес сервера
6. - Авторизуйтесь с учётными данными

## Развёртывание сервера

1. - Установите PostgreSQL 14+
2. - Создайте базу данных
3. - Настройте `appsettings.json`:
   - Строка подключения к БД
   - Секретный ключ JWT (мин. 32 символа)
4. - Запустите проект

---

## Структура решения
### MessengerShared (Общие компоненты)
Библиотека классов, используемая и сервером, и клиентом.
*   **DTO/** — объекты передачи данных.
*   **Enum/** — общие перечисления.
*   **Response/** — унифицированные обертки ответов API.

### MessengerAPI (Серверная часть)
ASP.NET Core приложение с использованием SignalR.
*   **Controllers/** — REST эндпоинты для управления пользователями, чатами, сообщениями и отделами.
*   **Services/** — бизнес-логика:
    *   `AccessControlService` — проверка прав доступа.
    *   `OnlineUserService` — мониторинг статуса пользователей в реальном времени.
    *   `FileService` — обработка и оптимизация изображений.
*   **Hubs/** — SignalR хаб (`ChatHub`) для мгновенного обмена событиями.
*   **Middleware/** — обработка глобальных исключений.
*   **Helpers/** — расширения моделей и генерация JWT-токенов.

### MessengerDesktop (Клиентская часть)
Кроссплатформенное приложение на Avalonia UI.
*   **ViewModels/** — логика интерфейса, разделенная по функциональным модулям:
    *   `Chat/` — управление сообщениями, файлами и вложениями.
    *   `Admin/` — панели управления пользователями и иерархией отделов.
    *   `Dialog/` — специализированные ViewModels для модальных окон (создание опросов, редактирование профилей).
    *   `Factories/` — фабрики для динамического создания ViewModels чатов.
*   **Views/** — XAML разметка страниц и окон.
*   **Services/** — клиентские сервисы:
    *   `Api/` — типизированный HTTP-клиент.
    *   `Auth/` — менеджер сессий и защищенное хранилище (`SecureStorage`).
    *   `Navigation/` — управление переходами и стеком диалогов.
    *   `GlobalHubConnection` — управление долгоживущим SignalR соединением.
*   **Controls/** — кастомные элементы управления (аватары, скелетная загрузка/Skeletons).
*   **Converters/** — богатый набор конвертеров данных для XAML.

### Messenger.Tests (Тестирование)
*   **Controllers/** — модульные тесты для API-контроллеров.
*   **Services/** — тесты бизнес-логики (AuthService, AdminService).
*   **Helpers/** — фабрики моков и контекста БД для тестов.

Скриншоты
====================

### Авторизация
<img src="Assets/Screenshots/Login.jpg" width="500">

### Добавление сотрудника в отделл
<img src="Assets/Screenshots/AddDepartmentUser.jpg" width="500">

### Список контактов
<img src="Assets/Screenshots/DialogList.jpg" width="500">

### Переписка с контактом
<img src="Assets/Screenshots/Dialog.jpg" width="500">

### Авторизация
<img src="Assets/Screenshots/Chat.jpg" width="500">

### Список чатов
<img src="Assets/Screenshots/ChatList.jpg" width="500">

### Поиск в чате
<img src="Assets/Screenshots/ChatSearch.jpg" width="500">

### Создание опроса
<img src="Assets/Screenshots/CreatePoll.jpg" width="500">

### Настройки
<img src="Assets/Screenshots/Settings.jpg" width="500">

### Список отделов
<img src="Assets/Screenshots/AdminDepartmentList.jpg" width="500">

### Создание отдела
<img src="Assets/Screenshots/CreateDepartment.jpg" width="500">

### Создание сотрудника
<img src="Assets/Screenshots/CreateUser.jpg" width="500">

Термины и сокращения
====================

| Термин | Расшифровка | Описание |
|--------|-------------|----------|
| API | Application Programming Interface | Интерфейс программирования |
| JWT | JSON Web Token | Токен аутентификации |
| DTO | Data Transfer Object | Объект передачи данных |
| ORM | Object-Relational Mapping | Объектно-реляционное отображение |
| SignalR | — | Библиотека real-time связи |
| MVVM | Model-View-ViewModel | Архитектурный паттерн |
| CRUD | Create, Read, Update, Delete | Базовые операции с данными |
| WebP | — | Формат изображений |

---

Справочная информация
=====================

Если у вас есть вопросы или предложения, напишите мне:

- Telegram: @a35472
