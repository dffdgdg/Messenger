<UserControl x:Name="Root" xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="MessengerDesktop.Views.PollDialog"
             xmlns:vm="clr-namespace:MessengerDesktop.ViewModels"
             MinWidth="360" MinHeight="340"
             x:DataType="vm:PollDialogViewModel">
    <Border Background="{DynamicResource SecondaryBG}" CornerRadius="14" Padding="28" MinWidth="320" MinHeight="320">
        <StackPanel Spacing="16">
            <TextBlock Text="Создать опрос" FontWeight="Bold" FontSize="22" Margin="0,0,0,8" Foreground="{DynamicResource TextPrimary}"/>
            <TextBox Watermark="Вопрос" Text="{Binding Question}" FontSize="16" Background="{DynamicResource ControlBg}" Foreground="{DynamicResource TextPrimary}"/>
			<TextBlock FontWeight="DemiBold" Foreground="{DynamicResource TextPrimary}">Варианты ответа</TextBlock>
            <ItemsControl ItemsSource="{Binding Options}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate x:DataType="vm:PollDialogViewModel+OptionItem">
                        <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                            <TextBox Width="220" FontSize="15" Text="{Binding Text}"
                                 Background="{DynamicResource PrimaryBG}" BorderBrush="{DynamicResource BorderBrush}" Foreground="{DynamicResource TextPrimary}"/>
							<Button Classes="IconButton"
                                    Width="28" Height="28"
                                    Background="{DynamicResource SecondaryBG}"
                                    Foreground="{DynamicResource Accent}"
                                    FontWeight="Bold"
                                    Click="RemoveOption_Click"
                                    Tag="{Binding}">
								<Path Data="{StaticResource Close}" Fill="{DynamicResource TextPrimary}"/>
							</Button>
                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
            <Button Content="Добавить вариант" Command="{Binding AddOptionCommand}" Background="{DynamicResource ControlBg}" Foreground="{DynamicResource TextPrimary}" FontWeight="SemiBold"/>
            <StackPanel Orientation="Vertical" Spacing="12" Margin="0,8,0,0">
				<TextBlock FontWeight="DemiBold" Foreground="{DynamicResource TextPrimary}">Настройки</TextBlock>
                <CheckBox Content="Выбор нескольких ответов" IsChecked="{Binding AllowsMultipleAnswers}" Foreground="{DynamicResource TextPrimary}"/>
                <CheckBox Content="Анонимное голосование" IsChecked="{Binding IsAnonymous}" Foreground="{DynamicResource TextPrimary}"/>
            </StackPanel>
            <StackPanel VerticalAlignment="Bottom" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="10" Margin="0,12,0,0">
                <Button Content="Отмена" Command="{Binding CancelCommand}" Background="{DynamicResource ControlBg}" Foreground="{DynamicResource TextPrimary}"/>
                <Button Content="Создать опрос" Command="{Binding CreateCommand}" IsEnabled="{Binding CanCreate}" Background="{DynamicResource Accent}" Foreground="White" FontWeight="Bold"/>
            </StackPanel>
        </StackPanel>
    </Border>
</UserControl>