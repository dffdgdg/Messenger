<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:MessengerDesktop.ViewModels"
             xmlns:conv="using:MessengerDesktop.Converters"
             mc:Ignorable="d"
             d:DesignWidth="400"
             x:Class="MessengerDesktop.Views.UserProfileDialog"
             x:DataType="vm:UserProfileDialogViewModel">
	<Border Width="400"
            Background="{DynamicResource SecondaryBG}"
            CornerRadius="8"
            BoxShadow="0 4 20 #40000000">

		<Grid RowDefinitions="Auto,*">
			<Border CornerRadius="8,8,0,0">
				<Grid Margin="22,0">

					<!-- Title -->
					<TextBlock Margin="12,22,22,0"
                               FontWeight="Bold"
                               Text="Информация"/>

				</Grid>
			</Border>

			<!-- ================= CONTENT ================= -->
			<ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
				<StackPanel Margin="24,12,24,24" Spacing="16">

					<!-- BLOCK 1: Аватар и имя -->
					<StackPanel>
						<Grid ColumnDefinitions="Auto,*" Margin="0,0,0,12">
							<Border Width="70"
                                    Height="70"
                                    CornerRadius="50"
                                    Background="#444444"
                                    ClipToBounds="True"
                                    VerticalAlignment="Center">
								<Image Source="{Binding AvatarBitmap}"
                                       Stretch="UniformToFill"
                                       />
							</Border>

							<StackPanel Grid.Column="1" Margin="16,0,0,0" VerticalAlignment="Center">
								<TextBlock Text="{Binding User.DisplayName}"
                                           FontSize="16"
                                           FontWeight="SemiBold"
                                           Foreground="{DynamicResource TextPrimary}"/>
								<TextBlock Text="был(а) недавно"
                                           FontSize="13"
                                           Foreground="{DynamicResource TextSecondary}"/>
							</StackPanel>
						</Grid>

						<!-- Разделитель -->
						<Border Height="1"
                                Background="{DynamicResource BorderDefault}"
                                Margin="0,8,0,0"/>
					</StackPanel>

					<!-- BLOCK 2: Основная информация -->
					<StackPanel>
						<TextBlock Text="{Binding User.Username}"
                                   FontSize="14"
                                   Foreground="{DynamicResource TextSecondary}"
                                   HorizontalAlignment="Center"/>

						<TextBlock Text="{Binding User.Department}"
                                   FontSize="14"
                                   Foreground="{DynamicResource TextSecondary}"
                                   HorizontalAlignment="Center"
                                   Margin="0,4,0,0"
                                   IsVisible="{Binding User.Department, Converter={conv:Converter Name=ObjectNotNullToBoolean}}"/>

						<!-- Разделитель -->
						<Border Height="1"
                                Background="{DynamicResource BorderDefault}"
                                Margin="0,12,0,0"/>
					</StackPanel>

					<!-- BLOCK 3: Дополнительная информация -->
					<StackPanel>
						<TextBlock Text="Контактная информация"
                                   FontWeight="Bold"
                                   FontSize="14"
                                   Margin="0,0,0,6"
                                   Foreground="{DynamicResource TextPrimary}"/>

						

						<!-- Разделитель -->
						<Border Height="1"
                                Background="{DynamicResource BorderDefault}"
                                Margin="0,12,0,0"/>
					</StackPanel>

					<!-- BLOCK 4: Отправка сообщения -->
					<StackPanel>
						<TextBox Text="{Binding Message}"
                                 AcceptsReturn="True"
                                 TextWrapping="Wrap"
                                 MinHeight="80"
                                 MaxHeight="160"
                                 Watermark="Написать сообщение..."
                                 Background="{DynamicResource PrimaryBG}"
                                 CornerRadius="8"
                                 Padding="12"/>

						<Button Content="Отправить"
                                HorizontalAlignment="Right"
                                Margin="0,8,0,0"
                                Command="{Binding SendMessageCommand}"
                                Classes="AccentButton"/>
					</StackPanel>

				</StackPanel>
			</ScrollViewer>

		</Grid>
	</Border>
</UserControl>
